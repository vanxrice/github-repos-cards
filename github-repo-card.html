<link rel="import" href="../polymer/polymer.html">

<link rel="import" href="../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../paper-shadow/paper-shadow.html">

<script src="../time-elements/time-elements.js"></script>

<!--
A Polymer web component that displays git repository data from Github. A JSONP request is made for the provided
request. This element was created to be used with Github's API, and expects a response in the form of Github's API v3.
The response object is exposed via data binding, which can be used to set the object or to use the object outside of
this element, see the demo for an example.

##### Example

    <github-repo-card request="https://api.github.com/users/vanxrice/repos?type=owner&sort=updated&direction=desc">
    </github-repo-card>

@element github-repo-card
@blurb A Polymer web component that fetches public git repository data from Github.
@status alpha
@homepage http://vanxrice.github.io/github-repos-cards
@demo http://vanxrice.github.io/github-repos-cards/demo.html
-->
<polymer-element name="github-repo-card" attributes="repository">
  <template is="auto binding">
    <link rel="stylesheet" href="github-repos-cards.css">

    <paper-shadow z="2" class="card">
      <div class="repo-head" horizontal layout>
        <a href="{{repository.html_url}}" horizontal layout center flex>{{repository.name}}</a>
        <div horizontal center layout>
          <p>{{repository.stargazers_count}}</p>
          <core-icon icon="star"></core-icon>
          <p>{{repository.watchers_count}}</p>
          <core-icon icon="visibility"></core-icon>
        </div>
      </div>

      <div class="repo-body" vertical layout>
        <p>{{repository.description}} - <a href="{{repository.html_url + '#readme'}}">README</a></p>
        
        <div horizontal layout end>
          <p flex>Latest commit to <b>{{repository.default_branch}}</b>
            <time is="relative-time" datetime="{{repository.updated_at}}"></time>
          </p>
          <a href="{{repository.html_url + '/archive/' + repository.default_branch + '.zip'}}">
            <paper-icon-button noink icon="cloud-download"></paper-icon-button>
          </a>
        </div>
      </div>
    </paper-shadow>

    <content></content>
  </template>
  <script>
    Polymer('github-repo-card', {
      /**
       * The `repository` attribute sets the repository object for the github-repo-card to render. It is expected in
       * the form of Github's API v3. However any object with the correct attributes will be displayed.
       *
       * See Github's documentation for more information, https://developer.github.com/v3/repos/.
       *
       * @attribute repository
       * @type object
       * @default null
       */
      repository: null,

      ready: function () {
      }
    });
  </script>
</polymer-element>
